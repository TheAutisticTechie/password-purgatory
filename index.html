<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="make-hell.js"></script>
    <link href="make-hell-pretty.css" rel="stylesheet" />
    <title>Password Purgatory - Making Life Hell for Spammers</title>
  </head>

  <body>
    <header>
      <img src="logo.jpg" alt="Password Purgatory" />
    </header>

    <section id="search">
      <form id="passwordPurgatory">
        <input
          autocapitalize="off"
          autocorrect="off"
          id="password"
          name="password"
          placeholder="enter password"
          spellcheck="false"
          type="password"
        />
        <button type="submit">make hell</button>
        <p id="response"></p>
      </form>
    </section>

    <section>
      <h1>Documentation</h1>
      <p>
        Password Purgatory is an intentionally infuriating API to request inane
        and ultimately unachievable password criteria intended to deliberately
        frustrate the user. Regardless of the password used, it will always be
        rejected hence subjecting the user to "purgatory". Read more in
        <a
          href="https://www.troyhunt.com/building-password-purgatory-with-cloudflare-pages-and-workers/"
          >the launch blog post</a
        >.
      </p>

      <h2>Request</h2>
      <p>
        There is a single API endpoint that can be invoked with a GET request
        passing the password as a query string:
      </p>
      <code
        >GET
        https://api.passwordpurgatory.com/make-hell?password={password}</code
      >

      <h2>Response</h2>
      <p>
        A JSON response is returned containing a message describing how the
        password did not meet the required criteria:
      </p>
      <code> { "message": "Password must contain at least 1 number" } </code>

      <h2>Cross-Origin Resource Sharing (CORS)</h2>
      <p>CORS is enabled to allow calling the API from all origins.</p>

      <h2>Embedding in an External Website</h2>
      <p>
        To orchestrate the request to the API and display of the returned
        message, the "make-hell.js" JavaScript file can be directly embedded in
        any consuming websites:
      </p>
      <code>
        &lt;script
        src="https://passwordpurgatory.com/make-hell.js"&gt;&lt;/script&gt;
      </code>
      <p>The script expects the embedding page to provide the following:</p>
      <ol>
        <li>A form named &quot;passwordPurgatory&quot;</li>
        <li>A password field named &quot;password&quot;</li>
        <li>An element for the response named &quot;response&quot;</li>
      </ol>
      <p>ToDo: implement SRI integrity check once version is stable</p>

      <h2>Enabling Logging</h2>
      <p>
        In order to enable logging you will need to first deploy the logger on Cloudflare https://github.com/troyhunt/password-purgatory-logger.<br>
        Once that is done, you will then need to include the following scripts in your code making sure to replace the API domain with your own cloudflare worker domain.
      </p>
      <code>
        &lt;script&gt;let apiDomain = &quot;https://password-purgatory-logger.jlynx.workers.dev&quot;;&lt;/script&gt;
&lt;script src=&quot;https://password-purgatory-jlynx.pages.dev/log-hell.js&quot;&gt;&lt;/script&gt;
      </code>

      <h2>Source Code</h2>
      <p>
        All code in Password Purgatory is open source and available on GitHub in
        the following repositories:
      </p>
      <ol>
        <li>
          This website:
          <a href="https://github.com/troyhunt/password-purgatory"
            >github.com/troyhunt/password-purgatory</a
          >
        </li>
        <li>
          The API:
          <a href="https://github.com/troyhunt/password-purgatory-api"
            >github.com/troyhunt/password-purgatory-api</a
          >
        </li>
      </ol>
    </section>
  </body>
</html>
